{layout name="layout1" /}
<style>
    .layui-panel {
        margin: 5px;
    }
    .layui-form-label {
        width: 120px;
        text-align: left;
        padding-left:30px;
    }
</style>
<div class="wrapper">
    <!-- 面板 -->
    <div class="layui-panel">
        <!-- 表单 -->
        <form class="layui-form">
            <!-- 字段集区块 -->
            <fieldset class="layui-elem-field layui-field-title">
                <legend>结算设置</legend>
                <div class="layui-field-box">
                    <div class="layui-form-item">
                        <label class="layui-form-label">佣金计算方式</label>
                        <div class="layui-input-block">
                            <input type="radio" name="cale_method" value="1" title="商品实际支付金额" {if $config.cale_method == 1}checked{/if}>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label"></label>
                        <div class="layui-input-block layui-word-aux">
                            根据商品实际支付金额及相应的佣金比例计算佣金
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">结算时机</label>
                        <div class="layui-inline">
                            <input type="radio" name="settlement" value="1" title="订单完成后" {if $config.settlement == 1}checked{/if}>
                        </div>
                        <div class="layui-inline">
                            <input type="number" min="0" name="settlement_days" value="{$config.settlement_days}" class="layui-input" />
                        </div>
                        <div class="layui-inline">
                            天
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label"></label>
                        <div class="layui-input-block layui-word-aux">
                            预估佣金结算后无法进行回收，请谨慎设置结算天数
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label"></label>
                        <div class="layui-input-block">
                            <button class="layui-btn layui-bg-blue layui-btn layui-btn-sm" lay-submit lay-filter="*">保存设置</button>
                        </div>
                    </div>
                </div>
            </fieldset>
        </form>
    </div>
</div>


<script>

    layui.config({
        version: "{$front_version}",
        base: '/static/lib/'
    }).use(['element', 'form'], function () {
        var $ = layui.$
            , form = layui.form
            , layer = layui.layer;

        form.on('submit(*)', function (data) {
            like.ajax({
                url: '{:url("distribution.distribution_setting/set")}'
                , data: data.field
                , type: 'post'
                , success: function (res) {
                    layer.msg(res.msg);
                },
            });
            return false; //阻止表单跳转
        });

    });
</script>